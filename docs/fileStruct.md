## 文件头 head

PDF 文件的第一行应是一个标题，由 5 个字符 %PDF–后跟 1.N 形式的版本号组成，其中 N 是 0 到 7 之间的数字。
符合标准的阅读器(解析器)应接受具有以下任何标头的文件：

```
%PDF–1.0

%PDF–1.1

%PDF–1.2

%PDF–1.3

%PDF–1.4

%PDF–1.5

%PDF–1.6

%PDF–1.7
```

从 PDF 1.4 开始，应使用文档目录词典中的版本条目代替页眉中指定的版本。

## 主体 body

PDF 文件的正文应由一系列表示文档内容的间接对象组成

## 交叉引用表 Cross-Reference Table

交叉引用表包含允许随机访问文件中间接对象的信息，以便无需读取整个文件即可找到任何特定对象。该表应包含每个间接对象的一行条目，指定该对象在文件正文中的字节偏移量。（从 PDF 1.5 开始，部分或全部交叉引用信息可以包含在**交叉引用流**中;

    注 1：交叉引用表是 PDF 文件中唯一具有固定格式的部分，它允许随机访问表中的条目。

该表包含一个或多个交叉引用部分。最初，整个表格由一个部分组成（如果文件是线性化的，则由两个部分组成;见附件 F）。每次增量更新文件时，应添加一个附加部分（请参见 7.5.6 “增量更新”）。

每个交叉引用部分应以包含关键字外部参照的行开头。这一行后面应是一个或多个交叉引用小节，可以按任何顺序出现。对于从未增量更新的文件，交叉引用节应仅包含一个小节，其对象编号从 0 开始。

    注 2 小节结构对于增量更新很有用，因为它允许将新的交叉引用节添加到 PDF 文件中，仅包含已添加或删除对象的条目。

每个交叉引用小节应包含连续范围的物体编号的条目。该小节应以包含两个数字的行开头，用空格（20h）分隔，表示本小节中第一个对象的对象编号和小节中的条目数。

此行后面是交叉引用条目本身，每行一个。每个条目的长度应正好为 20 个字节，包括行尾标记。有两种类型的交叉引用条目：一种用于正在使用的对象，另一种用于已删除并因此是空闲的对象。两种类型的条目都有类似的基本格式，由关键字 n（用于使用中的条目）或 f（用于空闲条目）区分。使用中条目的格式应为：

    nnnnnnnnnnnn ggggg n eol

    其中————
    nnnnnn 应为解码流中的 10 位字节偏移量

    GGGGG 应为 5 位代号

    n 应是一个关键字，将其标识为正在使用的条目

    EOL 应为 2 个字符的行尾序列

条目可以通过两种方式成为空闲条目列表的成员。

使用基本机制，交叉引用表中的空闲条目可以形成一个链表，每个空闲条目都包含下一个目标编号。表中的第一个条目（对象编号 0）应始终是空闲的，并且应具有 65，535 的代号;它应该是空闲对象链表的头部。最后一个空闲条目（链表的尾部）链接回对象编号 0。

使用第二种机制，该表可能包含其他空闲条目，这些条目链接回对象编号 0，并且生成编号为 65，535，即使这些条目本身不在链表中。

除对象编号 0 外，交叉引用表中的所有对象最初应具有 0 的代号。删除间接对象时，应将其交叉引用条目标记为空闲，并应将其添加到空闲条目的链接列表中。条目的世代号应递增 1，以指示下次创建具有该对象编号的对象时要使用的世代号。因此，每次重复使用该条目时，都会为其提供新的代号。最大世代数为 65，535;当交叉引用条目达到此值时，不得重复使用。

交叉引用表（包括原始交叉引用部分和所有更新部分）应包含从 0 到文件中定义的最大对象编号的每个对象编号的一个条目，即使此范围内的一个或多个对象编号实际上并未出现在文件中。